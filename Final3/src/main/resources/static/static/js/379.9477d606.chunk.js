"use strict";(self.webpackChunkfinal3=self.webpackChunkfinal3||[]).push([[379],{2380:(a,e,t)=>{t.r(e),t.d(e,{default:()=>x});var n=t(5043),l=t(831),s=t(9005),r=t(1922),d=t(7807),c=t(3222),i=t(7580),o=t(6720),m=t(5394),h=t(8839),u=t(7965),b=(t(3113),t(4723),t(579));const x=()=>{const[a,e]=(0,l.L4)(s.g3),t=(0,n.useRef)(null),[x,j]=(0,n.useState)([]),[N,v]=(0,n.useState)(null),[p,C]=(0,n.useState)({calendarTitle:"",calendarContent:"",calendarStart:"",calendarEnd:""}),f=(0,n.useCallback)((a=>{const{name:e,value:t}=a.target;C((a=>({...a,[e]:t})))}),[]),k=(0,n.useCallback)((()=>{C({calendarTitle:"",calendarContent:"",calendarStart:"",calendarEnd:""})}),[p]),g=(0,n.useCallback)((async()=>{const a=i.A.defaults.headers.common.Authorization;if(!a)return;if(p.calendarTitle.length>33)return void window.alert("\uc81c\ubaa9\uc758 \uc81c\ud55c \uae00\uc790\uc218\ub97c \ucd08\uacfc\ud588\uc2b5\ub2c8\ub2e4. \ucd5c\ub300 33\uae00\uc790\uae4c\uc9c0 \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.");if(p.calendarContent.length>300)return void window.alert("\ub0b4\uc6a9\uc758 \uc81c\ud55c \uae00\uc790\uc218\ub97c \ucd08\uacfc\ud588\uc2b5\ub2c8\ub2e4. \ucd5c\ub300 300\uc790\uae4c\uc9c0 \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.");const e={...p,calendarStart:H(new Date(p.calendarStart)),calendarEnd:H(new Date(p.calendarEnd))};await i.A.post("/calendar/",e,{headers:{Authorization:a}});await w(),k(),M()}),[p]);(0,n.useEffect)((()=>{w()}),[]);const w=(0,n.useCallback)((async()=>{const a=(await i.A.get("/calendar/listByDept")).data.map((a=>({id:a.calendarNo.toString(),title:"".concat(a.empName," - ").concat(a.calendarTitle),start:a.calendarStart,end:a.calendarEnd,extendedProps:{calendarNo:a.calendarNo,title:a.calendarTitle,start:a.calendarStart,end:a.calendarEnd,calendarWriter:a.calendarWriter,empName:a.empName,empGrade:a.empGrade,calendarContent:a.calendarContent}})));j(a)}),[j]),S=a=>{v(a.event.extendedProps),A()};(0,n.useEffect)((()=>{const a=new r.Vv(t.current,{plugins:[c.A,d.Ay],initialView:"dayGridMonth",events:x,selectable:!0,select:G,eventClick:S,eventTimeFormat:{hour:"numeric",meridiem:"short"}});return a.render(),()=>{a.destroy()}}),[x]);const y=(0,n.useCallback)((async a=>{if(!1===window.confirm("\u3139\u3147 \uc0ad\uc81c?"))return;await i.A.delete("/calendar/"+a.calendarNo);w(),I()}),[x]),E=(0,n.useCallback)((async()=>{if(p.calendarTitle.length>33)return void window.alert("\uc81c\ubaa9\uc758 \uc81c\ud55c \uae00\uc790\uc218\ub97c \ucd08\uacfc\ud588\uc2b5\ub2c8\ub2e4. \ucd5c\ub300 33\uae00\uc790\uae4c\uc9c0 \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.");if(p.calendarContent.length>300)return void window.alert("\ub0b4\uc6a9\uc758 \uc81c\ud55c \uae00\uc790\uc218\ub97c \ucd08\uacfc\ud588\uc2b5\ub2c8\ub2e4. \ucd5c\ub300 300\uc790\uae4c\uc9c0 \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.");const a={...p,calendarStart:H(new Date(p.calendarStart)),calendarEnd:H(new Date(p.calendarEnd))};await i.A.patch("/calendar/",a);await w(),k(),F(),w()}),[p]),T=(0,n.useRef)(),A=(0,n.useCallback)((()=>{new h.aF(T.current).show()}),[]),I=(0,n.useCallback)((()=>{h.aF.getInstance(T.current).hide()}),[]),B=(0,n.useRef)(),D=(0,n.useCallback)((()=>{if(N){I(),C({calendarNo:N.calendarNo,calendarWriter:N.calendarWriter,calendarTitle:N.title,calendarContent:N.calendarContent,calendarStart:N.start,calendarEnd:N.end});new h.aF(B.current).show()}}),[N]),F=(0,n.useCallback)((()=>{const a=h.aF.getInstance(B.current);k(),a.hide()}),[]),L=(0,n.useRef)(),W=(0,n.useCallback)((()=>{new h.aF(L.current).show()}),[]),M=(0,n.useCallback)((()=>{const a=h.aF.getInstance(L.current);k(),a.hide()}),[]),G=(0,n.useCallback)((a=>{const e=new Date(a.start),t=new Date(a.end-1);e.setHours(9,0,0,0),t.setHours(18,0,0,0),C({calendarTitle:"",calendarContent:"",calendarStart:H(e),calendarEnd:H(t)}),W()}),[C,W]),H=a=>{const e=a.getFullYear(),t=String(a.getMonth()+1).padStart(2,"0"),n=String(a.getDate()).padStart(2,"0"),l=String(a.getHours()).padStart(2,"0"),s=String(a.getMinutes()).padStart(2,"0");return"".concat(e,"-").concat(t,"-").concat(n," ").concat(l,":").concat(s)};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{ref:t}),(0,b.jsx)("div",{ref:T,className:"modal fade",id:"staticBackdrop infoModal","data-bs-backdrop":"static","data-bs-keyboard":"true",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:(0,b.jsx)("div",{className:"modal-dialog",children:(0,b.jsxs)("div",{className:"modal-content",children:[(0,b.jsxs)("div",{className:"modal-header",children:[(0,b.jsx)("h1",{className:"modal-title fs-5",id:"staticBackdropLabel",children:"\uc77c\uc815\uc0c1\uc138"}),(0,b.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:I})]}),(0,b.jsx)("div",{className:"modal-body",children:N&&(0,b.jsx)("table",{className:"table",children:(0,b.jsxs)("tbody",{children:[(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"\uc791\uc131\uc790"}),(0,b.jsxs)("td",{children:[N.empName,"(",N.empGrade,")"]})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"\uc81c\ubaa9"}),(0,b.jsx)("td",{children:N.title})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"\ub0b4\uc6a9"}),(0,b.jsx)("td",{children:(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:(N.calendarContent||"").replace(/\n/g,"<br />")}})})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"\uc2dc\uc791\uc77c\uc790"}),(0,b.jsx)("td",{children:N.start.substring(0,16)})]}),(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{children:"\uc885\ub8cc\uc77c\uc790"}),(0,b.jsx)("td",{children:N.end.substring(0,16)})]})]})})}),(0,b.jsx)("div",{className:"modal-footer",children:N&&N.calendarWriter===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("button",{className:"btn btn-pink me-2",onClick:D,children:"\uc218\uc815"}),(0,b.jsx)("button",{className:"btn btn-danger",onClick:()=>y(N),children:"\uc0ad\uc81c"})]})})]})})}),(0,b.jsx)("div",{ref:L,className:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"true",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:(0,b.jsx)("div",{className:"modal-dialog",children:(0,b.jsxs)("div",{className:"modal-content",children:[(0,b.jsxs)("div",{className:"modal-header",children:[(0,b.jsx)("h1",{className:"modal-title fs-5",id:"staticBackdropLabel",children:"\uc77c\uc815\ub4f1\ub85d"}),(0,b.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:M})]}),(0,b.jsxs)("div",{className:"modal-body",children:[(0,b.jsx)("div",{className:"row mt-4",children:(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("label",{children:"\uc81c\ubaa9"}),(0,b.jsx)("input",{type:"text",name:"calendarTitle",value:p.calendarTitle,onChange:f,className:"form-control"})]})}),(0,b.jsx)("div",{className:"row mt-4",children:(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("label",{children:"\ub0b4\uc6a9"}),(0,b.jsx)("textarea",{name:"calendarContent",value:p.calendarContent,onChange:f,className:"form-control  custom-textarea"})]})}),(0,b.jsxs)("div",{className:"row mt-4",children:[(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("label",{children:"\uc2dc\uc791\uc77c\uc790"}),(0,b.jsx)("br",{}),(0,b.jsx)(u.A,{"data-enable-time":!0,name:"calendarStart",value:p.calendarStart,options:{static:!0,minuteIncrement:30},onChange:a=>{let[e]=a;return C((a=>({...a,calendarStart:H(e)})))},className:"form-control"})]}),(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("label",{children:"\uc885\ub8cc\uc77c\uc790"}),(0,b.jsx)("br",{}),(0,b.jsx)(u.A,{"data-enable-time":!0,"Keyboard-focusable":!0,name:"calendarEnd",value:p.calendarEnd,options:{static:!0,minuteIncrement:30},onChange:a=>{let[e]=a;return C((a=>({...a,calendarEnd:e.toISOString()})))},className:"form-control"})]})]})]}),(0,b.jsxs)("div",{className:"modal-footer",children:[(0,b.jsxs)("button",{className:"btn btn-pink me-2",onClick:g,children:[(0,b.jsx)(m.gWm,{})," \ub4f1\ub85d"]}),(0,b.jsxs)("button",{className:"btn btn-danger",onClick:M,children:[(0,b.jsx)(o.uDv,{})," \ucde8\uc18c"]})]})]})})}),(0,b.jsx)("div",{ref:B,className:"modal fade",id:"staticBackdrop editModal","data-bs-backdrop":"static","data-bs-keyboard":"true",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:(0,b.jsx)("div",{className:"modal-dialog",children:(0,b.jsxs)("div",{className:"modal-content",children:[(0,b.jsxs)("div",{className:"modal-header",children:[(0,b.jsx)("h1",{className:"modal-title fs-5",id:"staticBackdropLabel",children:"\uc77c\uc815\uc218\uc815"}),(0,b.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:F})]}),(0,b.jsxs)("div",{className:"modal-body",children:[(0,b.jsx)("div",{className:"row mt-4",children:(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("label",{children:"\uc81c\ubaa9"}),(0,b.jsx)("input",{type:"text",name:"calendarTitle",value:p.calendarTitle,onChange:f,className:"form-control"})]})}),(0,b.jsx)("div",{className:"row mt-4",children:(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("label",{children:"\ub0b4\uc6a9"}),(0,b.jsx)("textarea",{name:"calendarContent",value:p.calendarContent,onChange:f,className:"form-control  custom-textarea"})]})}),(0,b.jsxs)("div",{className:"row mt-4",children:[(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("label",{children:"\uc2dc\uc791\uc77c\uc790"}),(0,b.jsx)(u.A,{"data-enable-time":!0,"data-enable-minute":!0,name:"calendarStart",value:p.calendarStart,options:{static:!0,minuteIncrement:30},nChange:a=>{let[e]=a;return C((a=>({...a,calendarStart:H(e)})))},className:"form-control"})]}),(0,b.jsxs)("div",{className:"col",children:[(0,b.jsx)("label",{children:"\uc885\ub8cc\uc77c\uc790"}),(0,b.jsx)(u.A,{"data-enable-time":!0,"data-enable-minute":!0,name:"calendarEnd",options:{static:!0,minuteIncrement:30},value:p.calendarEnd,onChange:a=>{let[e]=a;return C((a=>({...a,calendarEnd:H(e)})))},className:"form-control"})]})]})]}),(0,b.jsxs)("div",{className:"modal-footer",children:[(0,b.jsxs)("button",{type:"button",className:"btn btn-pink",onClick:E,children:[(0,b.jsx)(m.gWm,{})," \uc218\uc815"]}),(0,b.jsxs)("button",{type:"button",className:"btn btn-danger",onClick:F,children:[(0,b.jsx)(o.uDv,{})," \ucde8\uc18c"]})]})]})})})]})}},4723:()=>{}}]);
//# sourceMappingURL=379.9477d606.chunk.js.map