"use strict";(self.webpackChunkfinal3=self.webpackChunkfinal3||[]).push([[390],{6561:(e,t,s)=>{s.d(t,{A:()=>n});var o=s(579);const n=function(e){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("div",{className:"row",children:(0,o.jsx)("div",{className:"col",children:(0,o.jsxs)("div",{style:{backgroundColor:"#FFC0CB"},className:"p-4 text-light rounded",children:[(0,o.jsx)("h1",{children:e.title}),(0,o.jsx)("p",{children:e.content})]})})})})}},8390:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var o=s(5043),n=s(9005),a=s(831),l=s(6561),c=s(3156),r=s(184),d=s(423),i=s(397),m=s(7580),u=s(8839),p=s(3216),x=s(5394),h=(s(8206),s(579));const b=()=>{const{projectNo:e}=(0,p.g)(),[t,s]=(0,a.L4)(n.g3),[b,j]=(0,a.L4)(n.Xv),[g,C]=(0,o.useState)([]),[N,y]=(0,o.useState)([]),[w,v]=(0,o.useState)(null),[k,f]=(0,o.useState)(null),[L,S]=(0,o.useState)(""),[T,A]=(0,o.useState)([]),[R,W]=(0,o.useState)(!1),[E,z]=(0,o.useState)(""),[B,F]=(0,o.useState)([]),[I,M]=(0,o.useState)(!1),[K,O]=(0,o.useState)([]),[Z,q]=(0,o.useState)({documentTitle:"",documentContent:"",documentWriteTime:"",documentLimitTime:"",projectNo:e,documentApprover:"",empNo:"",documentStatus:""}),[D,H]=(0,o.useState)({projectNo:"",empNo:"",empName:"",deptName:"",gradeName:""}),[P,V]=(0,o.useState)(""),X=(0,o.useCallback)((e=>{O((t=>t.filter((t=>t!==e))))}),[]),[G,J]=(0,o.useState)(null),Q=(0,o.useCallback)((async()=>{}),[L]),U=(0,o.useCallback)((()=>{Q()}),[Q]),Y=(0,o.useCallback)((e=>{S(e.target.value)}),[]),$=(0,o.useCallback)((()=>g.filter((e=>e.documentNo&&e.documentNo.toString().toLowerCase().includes(L.toLowerCase())||e.documentTitle&&"string"===typeof e.documentTitle&&e.documentTitle.toLowerCase().includes(L.toLowerCase())||e.documentContent&&"string"===typeof e.documentContent&&e.documentContent.toLowerCase().includes(L.toLowerCase())||e.documentStatus&&"string"===typeof e.documentStatus&&e.documentStatus.toLowerCase().includes(L.toLowerCase())||e.documentWriteTime&&"string"===typeof e.documentWriteTime&&e.documentWriteTime.toLowerCase().includes(L.toLowerCase())||e.documentLimitTime&&"string"===typeof e.documentLimitTime&&e.documentLimitTime.toLowerCase().includes(L.toLowerCase())||e.documentApprover&&"string"===typeof e.documentApprover&&e.documentApprover.toLowerCase().includes(L.toLowerCase())))),[g,L])();(0,o.useEffect)((()=>{ee()}),[]);const _=(0,o.useRef)();(0,o.useEffect)((()=>{(async()=>{const t=await m.A.get("/project/".concat(e));z(t.data.projectName)})()}),[e]);const ee=(0,o.useCallback)((async()=>{const t=await m.A.get("/document/"+e);C(t.data)}),[e]),te=((0,o.useCallback)((async()=>{await m.A.post("/project/projectEmp")}),[]),(0,o.useCallback)((async e=>{if(!1===window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))return;await m.A.delete("/document/"+e.documentNo);ee()}),[g])),se=(0,o.useCallback)((e=>{q({...Z,[e.target.name]:e.target.value})}),[Z]),oe=((0,o.useCallback)((e=>{H({...D,[e.target.name]:e.target.value})}),[D]),(0,o.useRef)()),ne=(0,o.useCallback)((()=>{const e=new u.aF(oe.current);q({...Z,empNo:t,documentApprover:P}),e.show()}),[oe,t,P]),ae=(0,o.useCallback)((()=>{u.aF.getInstance(oe.current).hide()}),[oe]),le=(0,o.useCallback)((()=>{q({projectNo:"",empNo:"",documentTitle:"",documentContent:"",documentWriteTime:"",documentLimitTime:"",documentApprover:""})}),[Z]),ce=(0,o.useCallback)((async()=>{try{const e=(await m.A.post("/document/",Z)).data;if(w){const t=new FormData;t.append("attach",w);const s=await m.A.post("/document/upload/".concat(e.documentNo),t,{headers:{"Content-Type":"multipart/form-data"}});console.log("\ud30c\uc77c \uc5c5\ub85c\ub4dc \uacb0\uacfc:",s.data)}ee(),le(),ae()}catch(e){console.error("\ubb38\uc11c \uc800\uc7a5 \ub610\ub294 \ud30c\uc77c \uc5c5\ub85c\ub4dc \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}finally{v(null)}}),[Z,w,ee,le,ae]),re=(0,o.useCallback)((()=>{!1!==window.confirm("\uc791\uc131\uc744 \ucde8\uc18c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(le(),ae())}),[Z]),[de,ie]=(0,o.useState)({}),[me,ue]=(0,o.useState)(!1),pe=(0,o.useCallback)((()=>{const e=!me;ue(e),ie(B.reduce(((t,s,o)=>({...t,[o]:e})),{})),O(e?B.map((e=>e.empName)):[])}),[me,B]),xe=(0,o.useCallback)((e=>{ie((t=>({...t,[e]:!t[e]}))),de[e]?O((t=>t.filter(((t,s)=>s!==e)))):O((t=>[...t,B[e].empName]))}),[de,B]),he=(0,o.useCallback)((async()=>{const t=B.filter(((e,t)=>de[t]));if(0===t.length)return;await m.A.post("/project/projectEmp",{projectNo:e,empNoList:t.map((e=>e.empNo))});const s=B.filter(((e,t)=>!de[t]));F(s),ie({}),ue(!1)}),[de,B]);(0,o.useEffect)((()=>{(async()=>{const t=await m.A.get("/project/getProjectName/".concat(e));y(t.data)})()}),[e]),(0,o.useEffect)((()=>{(async()=>{const e=await m.A.get("/project/companyEmployees");F(e.data)})()}),[I]),(0,o.useEffect)((()=>{}),[B]);const be=(0,o.useCallback)((e=>{const t=[...g].map((e=>!0===e.edit?{...G,edit:!1}:{...e}));J({...e});const s=t.map((t=>e.documentNo===t.documentNo?{...t,edit:!0}:{...t}));C(s)}),[g]),je=(0,o.useCallback)((e=>{const t=[...g].map((t=>e.documentNo===t.documentNo?{...G,edit:!1}:{...t}));C(t)}),[g]),ge=(0,o.useCallback)(((e,t)=>{const s=[...g].map((s=>t.documentNo===s.documentNo?{...s,[e.target.name]:e.target.value}:{...s}));C(s)}),[g]),Ce=(0,o.useCallback)((async e=>{await m.A.put("/document/",e);ee()}),[g]);return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.A,{title:"".concat(e," \ubc88 \ud504\ub85c\uc81d\ud2b8"),style:{backgroundColor:"rgb(240, 174, 203)"}}),(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginTop:"20px",width:"100%"},children:[(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,h.jsx)(x.Ic,{style:{fontSize:"2.5em",marginRight:"8px",color:"hotpink"}}),(0,h.jsxs)("div",{style:{padding:"10px 12px",borderRadius:"15px",backgroundColor:"rgb(240, 211, 52)",display:"inline-block",marginBottom:"10px",fontWeight:"bold",fontSize:"15px",color:"#007bff"},children:["\ud504\ub85c\uc81d\ud2b8 \ucc38\uc5ec\uc790 :",K.map(((e,t)=>(0,h.jsxs)("span",{style:{marginLeft:"10px",display:"inline-flex",alignItems:"center"},children:[e,(0,h.jsx)(c.V2x,{style:{marginLeft:"5px",cursor:"pointer",color:"red",fontSize:"1em"},onClick:()=>X(e)})]},t)))]})]}),(0,h.jsx)("div",{children:I?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("button",{className:"btn btn-primary",style:{backgroundColor:"pink",border:"none"},onClick:he,children:"\ub4f1\ub85d"}),"\xa0 \xa0",(0,h.jsx)("button",{className:"btn btn-primary",style:{backgroundColor:"pink",border:"none"},onClick:()=>M(!1),children:"\ucde8\uc18c"})]}):(0,h.jsx)("button",{className:"btn btn-primary",style:{width:"160px",height:"40px",color:"white",fontSize:"16px",backgroundColor:"pink",border:"none",transition:"background-color 0.3s, color 0.3s",cursor:"pointer",padding:"5px 10px",borderRadius:"5px"},onMouseEnter:e=>{e.target.style.backgroundColor="hotpink",e.target.style.color="white"},onMouseLeave:e=>{e.target.style.backgroundColor="pink",e.target.style.color="white"},onClick:()=>M(!0),children:"\ud504\ub85c\uc81d\ud2b8 \ucd08\ub300\ud558\uae30"})})]}),(0,h.jsxs)("div",{className:"row mt-4 justify-content-center",children:[(0,h.jsxs)("div",{className:"col-8 col-md-9 d-flex align-items-center",children:[(0,h.jsx)("input",{style:{border:"2.5px solid pink",boxShadow:"0 4px 6px rgba(0, 0, 0.1, 0.2)"},type:"text",className:"form-control me-2",placeholder:"\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694...",value:L,onChange:Y}),(0,h.jsx)("button",{className:"btn btn-outline-secondary",type:"button",onClick:U,style:{backgroundColor:"rgb(255,192,203,0.5)"},children:(0,h.jsx)(r.KSO,{})})]}),(0,h.jsx)("div",{className:"col-md-3 text-end",children:(0,h.jsxs)("button",{className:"btn btn-primary",style:{width:"160px",height:"40px",color:"white",fontSize:"16px",backgroundColor:"pink",border:"none",transition:"background-color 0.3s, color 0.3s",cursor:"pointer",padding:"5px 10px",borderRadius:"5px"},onMouseEnter:e=>{e.target.style.backgroundColor="hotpink",e.target.style.color="white"},onMouseLeave:e=>{e.target.style.backgroundColor="pink",e.target.style.color="white"},onClick:e=>ne(),children:[(0,h.jsx)(d.t50,{}),"\uc0c8 \ubb38\uc11c"]})})]}),I&&(0,h.jsxs)("div",{className:"row mt-4",children:[(0,h.jsx)("div",{className:"col-md-3 text-end"}),(0,h.jsx)("div",{className:"row",children:(0,h.jsx)("div",{className:"col",children:(0,h.jsxs)("table",{className:"table",children:[(0,h.jsx)("thead",{children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{children:(0,h.jsx)("input",{type:"checkbox",checked:me,onChange:pe})}),(0,h.jsx)("th",{children:"\uc774\ub984"}),(0,h.jsx)("th",{children:"\ubd80\uc11c"}),(0,h.jsx)("th",{children:"\uc9c1\uae09"})]})}),(0,h.jsx)("tbody",{children:B.map(((e,t)=>(0,h.jsxs)("tr",{children:[(0,h.jsx)("td",{children:(0,h.jsx)("input",{type:"checkbox",checked:de[t]||!1,onChange:()=>xe(t)})}),(0,h.jsx)("td",{children:e.empName}),(0,h.jsx)("td",{children:e.deptName}),(0,h.jsx)("td",{children:e.gradeName})]},e.empNo)))})]})})})]}),$.map((e=>(0,h.jsx)("div",{className:"row mt-4",children:(0,h.jsx)("div",{className:"col",children:(0,h.jsx)("div",{className:"card mb-3",style:{border:"2px solid pink",boxShadow:"0 4px 6px rgba(0, 0, 0.1, 0.2)",borderRadius:"10px"},children:(0,h.jsxs)("div",{className:"card-body",style:{border:"2px solid pink",boxShadow:"0 4px 6px rgba(0, 0, 0.1, 0.2)"},children:[(0,h.jsxs)("div",{className:"card-body d-flex flex-wrap justify-content-between",children:[(0,h.jsxs)("div",{className:"d-flex justify-content-center",style:{marginBottom:"10px"},children:[(0,h.jsxs)("div",{className:"rounded  p-2 mb-2 shadow-sm bg-danger-subtle  border-danger-subtle",style:{width:"160px",marginRight:"20px",backgroundColor:"rgb(255,192,203,0.5)",border:"none"},children:["\ud504\ub85c\uc81d\ud2b8 \ubc88\ud638: ",e.projectNo]}),(0,h.jsxs)("div",{className:"rounded  p-2 mb-2 shadow-sm bg-danger-subtle  border-danger-subtle",style:{width:"130px",marginRight:"2px",backgroundColor:"rgb(255,192,203,0.5)"},children:["\ubb38\uc11c \ubc88\ud638: ",e.documentNo]})]}),(0,h.jsx)("div",{className:"rounded border border bg-".concat("\uc694\uccad"===e.documentStatus?"primary-subtle":"\uc9c4\ud589"===e.documentStatus?"success-subtle":"\ubcf4\ub958"===e.documentStatus?"warning":"\ubc18\ub824"===e.documentStatus?"danger":"success"," p-2 d-flex justify-content-center align-items-center"),style:{width:"80px",height:"40px",color:"\ubc18\ub824"===e.documentStatus||"\uc2b9\uc778"===e.documentStatus?"white":"initial"},children:e.edit?(0,h.jsxs)("select",{value:e.documentStatus,name:"documentStatus",onChange:t=>ge(t,e),className:"documentStatus",style:{textAlign:"center"},children:[(0,h.jsx)("option",{value:"\uc694\uccad",children:"\uc694\uccad"}),(0,h.jsx)("option",{value:"\uc9c4\ud589",children:"\uc9c4\ud589"}),(0,h.jsx)("option",{value:"\ubcf4\ub958",children:"\ubcf4\ub958"}),(0,h.jsx)("option",{value:"\ubc18\ub824",children:"\ubc18\ub824"}),(0,h.jsx)("option",{value:"\uc2b9\uc778",children:"\uc2b9\uc778"})]}):(0,h.jsx)("div",{style:{textAlign:"center"},children:e.documentStatus})}),(0,h.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,h.jsxs)("div",{className:"d-flex align-items-center",children:[(0,h.jsx)(r.bfZ,{style:{fontSize:"1.9em",marginRight:"8px",color:"#A99AB8"}}),(0,h.jsxs)("div",{className:"rounded p-2 mb-2 shadow-sm bg-warning-subtle",children:["\uc2dc\uc791\uc77c: ",e.edit?(0,h.jsx)("input",{type:"date",name:"documentWriteTime",value:e.documentWriteTime,onChange:t=>ge(t,e)}):e.documentWriteTime]})]})," \xa0\xa0\xa0\xa0",(0,h.jsxs)("div",{className:"d-flex align-items-center",children:[(0,h.jsx)(r.bfZ,{style:{fontSize:"1.9em",marginRight:"8px",color:"#A99AB8"}}),(0,h.jsxs)("div",{className:"rounded p-2 mb-2 shadow-sm bg-warning-subtle",children:["\ub9c8\uac10\uc77c: ",e.edit?(0,h.jsx)("input",{type:"date",name:"documentLimitTime",value:e.documentLimitTime,onChange:t=>ge(t,e)}):e.documentLimitTime]})]})]})]}),(0,h.jsx)("div",{style:{borderBottom:"2px solid pink",marginBottom:"20px",marginTop:"20px"},children:e.documentTitle.toLowerCase().includes(L.toLowerCase())?(0,h.jsx)("span",{children:e.documentTitle.split(new RegExp("(".concat(L,")"),"ig")).map(((e,t)=>e.toLowerCase()===L.toLowerCase()?(0,h.jsx)("span",{style:{backgroundColor:"yellow"},children:e},t):(0,h.jsx)("span",{children:e},t)))}):e.documentTitle}),(0,h.jsx)("div",{className:"card-text",style:{border:"2px solid pink",borderRadius:"10px",marginBottom:"20px",marginTop:"20px"},children:e.edit?(0,h.jsx)("textarea",{value:e.documentContent,name:"documentContent",onChange:t=>ge(t,e),className:"form-control",rows:7}):(0,h.jsx)("div",{className:"rounded border p-2 bg-white",style:{borderRadius:"10px",height:"200px"},children:e.documentContent.toLowerCase().includes(L.toLowerCase())?(0,h.jsx)("span",{children:e.documentContent.split(new RegExp("(".concat(L,")"),"ig")).map(((e,t)=>e.toLowerCase()===L.toLowerCase()?(0,h.jsx)("span",{style:{backgroundColor:"yellow",borderRadius:"10px"},children:e},t):(0,h.jsx)("span",{children:e},t)))}):e.documentContent})}),(0,h.jsx)("div",{className:"card-title",children:(0,h.jsxs)("div",{className:"card-text d-flex justify-content-between",children:[(0,h.jsxs)("div",{className:"rounded  p-2 mb-2 shadow-sm bg-danger-subtle  border-danger-subtle",style:{borderRadius:"10px",boderColor:"pink"},children:["\uacb0\uc7ac\uc790: ",e.documentApprover?e.documentApprover.toLowerCase().includes(L.toLowerCase())?(0,h.jsx)("span",{children:e.documentApprover.split(new RegExp("(".concat(L,")"),"ig")).map(((e,t)=>e.toLowerCase()===L.toLowerCase()?(0,h.jsx)("span",{style:{backgroundColor:"yellow",borderRadius:"10px"},children:e},t):(0,h.jsx)("span",{children:e},t)))}):e.documentApprover:null]}),(0,h.jsxs)("div",{className:"rounded  p-2 mb-2 shadow-sm bg-danger-subtle  border-danger-subtle",style:{borderRadius:"10px",borderColor:"pink"},children:["\uc791\uc131\uc790: ",e.documentWriter?e.documentWriter.toLowerCase().includes(L.toLowerCase())?(0,h.jsx)("span",{children:e.documentWriter.split(new RegExp("(".concat(L,")"),"ig")).map(((e,t)=>e.toLowerCase()===L.toLowerCase()?(0,h.jsx)("span",{style:{backgroundColor:"yellow",borderRadius:"10px"},children:e},t):(0,h.jsx)("span",{children:e},t)))}):e.documentWriter:null]}),(0,h.jsx)("div",{className:"text-end",children:e.edit?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.CMH,{className:"text-success me-2",onClick:()=>Ce(e),style:{fontSize:"40px"}}),(0,h.jsx)(i.aqA,{className:"text-danger",onClick:()=>je(e),style:{fontSize:"40px"}})]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(r.uO9,{className:"text-warning me-2",onClick:()=>be(e),style:{fontSize:"40px"}}),(0,h.jsx)(c.Kgd,{className:"text-danger",onClick:()=>te(e),style:{fontSize:"40px"}})]})})]})})]})})})},e.documentNo))),(0,h.jsx)("div",{ref:oe,className:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:(0,h.jsx)("div",{className:"modal-dialog",children:(0,h.jsxs)("div",{className:"modal-content",children:[(0,h.jsxs)("div",{className:"modal-header",children:[(0,h.jsx)("h1",{className:"modal-title fs-5",id:"staticBackdropLabel",children:"\uc0c8\ubb38\uc11c"}),(0,h.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:re})]}),(0,h.jsxs)("div",{className:"modal-body",children:[(0,h.jsx)("button",{className:"btn btn-secondary me-2",style:{backgroundColor:R?"pink":"white"},onClick:()=>W(!0),children:"\uc77c\ubc18"}),(0,h.jsx)("button",{className:"btn btn-secondary me-2",style:{backgroundColor:R?"white":"pink"},onClick:()=>W(!1),children:"\uacb0\uc7ac"}),(0,h.jsx)("div",{children:(0,h.jsxs)("p",{children:["\ud504\ub85c\uc81d\ud2b8 \ubc88\ud638: ",Z.projectNo]})}),(0,h.jsx)("div",{children:(0,h.jsxs)("p",{children:["\uc0ac\uc6d0 \ubc88\ud638: ",Z.empNo]})}),(0,h.jsx)("div",{className:"row",children:(0,h.jsxs)("div",{className:"col",children:[(0,h.jsx)("label",{children:"\uc2dc\uc791\uc77c"}),(0,h.jsx)("input",{type:"date",name:"documentWriteTime",value:Z.documentWriteTime,onChange:se,className:"form-control"})]})}),(0,h.jsx)("div",{className:"row",children:(0,h.jsxs)("div",{className:"col",children:[(0,h.jsx)("label",{children:"\ub9c8\uac10\uc77c"}),(0,h.jsx)("input",{type:"date",name:"documentLimitTime",value:Z.documentLimitTime,onChange:se,className:"form-control"})]})}),(0,h.jsx)("div",{className:"row",children:(0,h.jsxs)("div",{className:"col",children:[(0,h.jsx)("label",{children:"\ubb38\uc11c \uc81c\ubaa9"}),(0,h.jsx)("input",{type:"text",name:"documentTitle",value:Z.documentTitle,onChange:se,className:"form-control"})]})}),(0,h.jsx)("div",{className:"row",children:(0,h.jsxs)("div",{className:"col",children:[(0,h.jsx)("label",{children:"\ub0b4\uc6a9"}),(0,h.jsx)("textarea",{name:"documentContent",value:Z.documentContent,onChange:se,className:"form-control",rows:5})]})}),(0,h.jsxs)("div",{className:"row",style:{display:R?"none":"block"},children:[(0,h.jsx)("div",{className:"row mt-4",children:(0,h.jsxs)("div",{className:"col",children:[(0,h.jsx)("label",{htmlFor:"approver",children:"\uacb0\uc7ac\uc790 \uc120\ud0dd:"}),(0,h.jsxs)("select",{id:"approver",className:"form-select",value:Z.documentApprover,onChange:e=>q({...Z,documentApprover:e.target.value}),children:[(0,h.jsx)("option",{value:"",children:"\uacb0\uc7ac\uc790\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),B.map((e=>(0,h.jsxs)("option",{value:e.empName,children:[e.empNo,"  ",e.empName,"  ",e.deptName,"   ",e.gradeName]},e.empNo)))]})]})}),(0,h.jsxs)("div",{className:"col-md-3",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("input",{type:"file",className:"form-control form-control-sm",id:"upload","aria-label":"upload",style:{display:"none"},ref:_,onChange:e=>{v(e.target.files[0])}}),(0,h.jsx)("br",{})]}),(0,h.jsx)("button",{onClick:()=>{_.current.click()},children:"\ud30c\uc77c \uc120\ud0dd"})]})]})]}),(0,h.jsxs)("div",{className:"modal-footer",children:[(0,h.jsx)("button",{className:"btn btn-success me-2",onClick:ce,children:"\ub4f1\ub85d"}),(0,h.jsx)("button",{className:"btn btn-danger",onClick:re,children:"\ucde8\uc18c"})]})]})})})]})}},8206:()=>{}}]);
//# sourceMappingURL=390.72da4844.chunk.js.map