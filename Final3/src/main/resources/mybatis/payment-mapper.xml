<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="payment">
	
	<!-- 결제 정보 등록 -->
	<!-- 시퀀스 번호 생성 -->
	<select id="paymentSequence" resultType="int">
		select payment_seq.nextval from dual
	</select>
	<insert id="paymentAdd">
		insert into payment(
			payment_no, payment_time, payment_name,
			payment_total, company_no,
			payment_tid, payment_sid, payment_status
		)
		values (
			#{paymentNo}, #{paymentTime}, #{paymentName}, 
			#{paymentTotal}, #{companyNo},
			#{paymentTid}, #{paymentSid}, 'ACTIVE'
		)
	</insert>
	
	<!-- 정기결제 취소 -->
	<insert id="paymentCancel">
		insert into payment(
			payment_no, payment_time,
			company_no, payment_sid, payment_status
		)
		values (
			#{paymentNo}, #{paymentTime},
			#{companyNo}, #{paymentSid}, 'INACTIVE'
		)
	</insert>
	
	<select id="paymentList" resultType="paymentDto">
		select * from payment where company_no = #{companyNo} order by payment_no desc
	</select>
</mapper>